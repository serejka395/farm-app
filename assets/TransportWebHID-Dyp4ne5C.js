var ut=Object.defineProperty;var lt=(t,c,r)=>c in t?ut(t,c,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[c]=r;var _=(t,c,r)=>lt(t,typeof c!="symbol"?c+"":c,r);import{B as V,l as H,p as ft,m as ht,n as nr,o as ir,D as dt,q as Et}from"./vendor-solana-CbqHDVHw.js";import{g as pt}from"./vendor-react-8aPgSKYw.js";const ar=5;function mt(t){const c=V.alloc(2);return c.writeUInt16BE(t,0),c}const Rt={data:V.alloc(0),dataLength:0,sequence:0},It=(t,c)=>({makeBlocks(r){let s=V.concat([mt(r.length),r]);const n=c-5,l=Math.ceil(s.length/n);s=V.concat([s,V.alloc(l*n-s.length+1).fill(0)]);const o=[];for(let f=0;f<l;f++){const a=V.alloc(5);a.writeUInt16BE(t,0),a.writeUInt8(ar,2),a.writeUInt16BE(f,3);const i=s.slice(f*n,(f+1)*n);o.push(V.concat([a,i]))}return o},reduceResponse(r,s){let{data:n,dataLength:l,sequence:o}=r||Rt;if(s.readUInt16BE(0)!==t)throw new H("Invalid channel","InvalidChannel");if(s.readUInt8(2)!==ar)throw new H("Invalid tag","InvalidTag");if(s.readUInt16BE(3)!==o)throw new H("Invalid sequence","InvalidSequence");r||(l=s.readUInt16BE(5)),o++;const f=s.slice(r?5:7);return n=V.concat([n,f]),n.length>l&&(n=n.slice(0,l)),{data:n,dataLength:l,sequence:o}},getReducedResult(r){if(r&&r.dataLength===r.data.length)return r.data}});var W={exports:{}},ae,or;function Z(){if(or)return ae;or=1;const t="2.0.0",c=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,n=c-6;return ae={MAX_LENGTH:c,MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:n,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ae}var oe,cr;function J(){if(cr)return oe;cr=1;var t={};return oe=typeof ft=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},oe}var ur;function Y(){return ur||(ur=1,(function(t,c){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:n}=Z(),l=J();c=t.exports={};const o=c.re=[],f=c.safeRe=[],a=c.src=[],i=c.safeSrc=[],e=c.t={};let u=0;const h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",n],[h,s]],O=N=>{for(const[A,x]of m)N=N.split(`${A}*`).join(`${A}{0,${x}}`).split(`${A}+`).join(`${A}{1,${x}}`);return N},E=(N,A,x)=>{const T=O(A),D=u++;l(N,D,A),e[N]=D,a[D]=A,i[D]=T,o[D]=new RegExp(A,x?"g":void 0),f[D]=new RegExp(T,x?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),E("MAINVERSION",`(${a[e.NUMERICIDENTIFIER]})\\.(${a[e.NUMERICIDENTIFIER]})\\.(${a[e.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${a[e.NUMERICIDENTIFIERLOOSE]})\\.(${a[e.NUMERICIDENTIFIERLOOSE]})\\.(${a[e.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${a[e.NONNUMERICIDENTIFIER]}|${a[e.NUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${a[e.NONNUMERICIDENTIFIER]}|${a[e.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASE",`(?:-(${a[e.PRERELEASEIDENTIFIER]}(?:\\.${a[e.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${a[e.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[e.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${h}+`),E("BUILD",`(?:\\+(${a[e.BUILDIDENTIFIER]}(?:\\.${a[e.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${a[e.MAINVERSION]}${a[e.PRERELEASE]}?${a[e.BUILD]}?`),E("FULL",`^${a[e.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${a[e.MAINVERSIONLOOSE]}${a[e.PRERELEASELOOSE]}?${a[e.BUILD]}?`),E("LOOSE",`^${a[e.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${a[e.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${a[e.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${a[e.XRANGEIDENTIFIER]})(?:\\.(${a[e.XRANGEIDENTIFIER]})(?:\\.(${a[e.XRANGEIDENTIFIER]})(?:${a[e.PRERELEASE]})?${a[e.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${a[e.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[e.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[e.XRANGEIDENTIFIERLOOSE]})(?:${a[e.PRERELEASELOOSE]})?${a[e.BUILD]}?)?)?`),E("XRANGE",`^${a[e.GTLT]}\\s*${a[e.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${a[e.GTLT]}\\s*${a[e.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),E("COERCE",`${a[e.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",a[e.COERCEPLAIN]+`(?:${a[e.PRERELEASE]})?(?:${a[e.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",a[e.COERCE],!0),E("COERCERTLFULL",a[e.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${a[e.LONETILDE]}\\s+`,!0),c.tildeTrimReplace="$1~",E("TILDE",`^${a[e.LONETILDE]}${a[e.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${a[e.LONETILDE]}${a[e.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${a[e.LONECARET]}\\s+`,!0),c.caretTrimReplace="$1^",E("CARET",`^${a[e.LONECARET]}${a[e.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${a[e.LONECARET]}${a[e.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${a[e.GTLT]}\\s*(${a[e.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${a[e.GTLT]}\\s*(${a[e.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${a[e.GTLT]}\\s*(${a[e.LOOSEPLAIN]}|${a[e.XRANGEPLAIN]})`,!0),c.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${a[e.XRANGEPLAIN]})\\s+-\\s+(${a[e.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${a[e.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[e.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(W,W.exports)),W.exports}var ce,lr;function Je(){if(lr)return ce;lr=1;const t=Object.freeze({loose:!0}),c=Object.freeze({});return ce=s=>s?typeof s!="object"?t:s:c,ce}var ue,fr;function st(){if(fr)return ue;fr=1;const t=/^[0-9]+$/,c=(s,n)=>{if(typeof s=="number"&&typeof n=="number")return s===n?0:s<n?-1:1;const l=t.test(s),o=t.test(n);return l&&o&&(s=+s,n=+n),s===n?0:l&&!o?-1:o&&!l?1:s<n?-1:1};return ue={compareIdentifiers:c,rcompareIdentifiers:(s,n)=>c(n,s)},ue}var le,hr;function G(){if(hr)return le;hr=1;const t=J(),{MAX_LENGTH:c,MAX_SAFE_INTEGER:r}=Z(),{safeRe:s,t:n}=Y(),l=Je(),{compareIdentifiers:o}=st();class f{constructor(i,e){if(e=l(e),i instanceof f){if(i.loose===!!e.loose&&i.includePrerelease===!!e.includePrerelease)return i;i=i.version}else if(typeof i!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>c)throw new TypeError(`version is longer than ${c} characters`);t("SemVer",i,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const u=i.trim().match(e.loose?s[n.LOOSE]:s[n.FULL]);if(!u)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const m=+h;if(m>=0&&m<r)return m}return h}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(i){if(t("SemVer.compare",this.version,this.options,i),!(i instanceof f)){if(typeof i=="string"&&i===this.version)return 0;i=new f(i,this.options)}return i.version===this.version?0:this.compareMain(i)||this.comparePre(i)}compareMain(i){return i instanceof f||(i=new f(i,this.options)),this.major<i.major?-1:this.major>i.major?1:this.minor<i.minor?-1:this.minor>i.minor?1:this.patch<i.patch?-1:this.patch>i.patch?1:0}comparePre(i){if(i instanceof f||(i=new f(i,this.options)),this.prerelease.length&&!i.prerelease.length)return-1;if(!this.prerelease.length&&i.prerelease.length)return 1;if(!this.prerelease.length&&!i.prerelease.length)return 0;let e=0;do{const u=this.prerelease[e],h=i.prerelease[e];if(t("prerelease compare",e,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return o(u,h)}while(++e)}compareBuild(i){i instanceof f||(i=new f(i,this.options));let e=0;do{const u=this.build[e],h=i.build[e];if(t("build compare",e,u,h),u===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(u===void 0)return-1;if(u===h)continue;return o(u,h)}while(++e)}inc(i,e,u){if(i.startsWith("pre")){if(!e&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(e){const h=`-${e}`.match(this.options.loose?s[n.PRERELEASELOOSE]:s[n.PRERELEASE]);if(!h||h[1]!==e)throw new Error(`invalid identifier: ${e}`)}}switch(i){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,u),this.inc("pre",e,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,u),this.inc("pre",e,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(e===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(e){let m=[e,h];u===!1&&(m=[e]),o(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${i}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return le=f,le}var fe,dr;function M(){if(dr)return fe;dr=1;const t=G();return fe=(r,s,n=!1)=>{if(r instanceof t)return r;try{return new t(r,s)}catch(l){if(!n)return null;throw l}},fe}var he,Er;function vt(){if(Er)return he;Er=1;const t=M();return he=(r,s)=>{const n=t(r,s);return n?n.version:null},he}var de,pr;function $t(){if(pr)return de;pr=1;const t=M();return de=(r,s)=>{const n=t(r.trim().replace(/^[=v]+/,""),s);return n?n.version:null},de}var Ee,mr;function St(){if(mr)return Ee;mr=1;const t=G();return Ee=(r,s,n,l,o)=>{typeof n=="string"&&(o=l,l=n,n=void 0);try{return new t(r instanceof t?r.version:r,n).inc(s,l,o).version}catch{return null}},Ee}var pe,Rr;function Lt(){if(Rr)return pe;Rr=1;const t=M();return pe=(r,s)=>{const n=t(r,null,!0),l=t(s,null,!0),o=n.compare(l);if(o===0)return null;const f=o>0,a=f?n:l,i=f?l:n,e=!!a.prerelease.length;if(!!i.prerelease.length&&!e){if(!i.patch&&!i.minor)return"major";if(i.compareMain(a)===0)return i.minor&&!i.patch?"minor":"patch"}const h=e?"pre":"";return n.major!==l.major?h+"major":n.minor!==l.minor?h+"minor":n.patch!==l.patch?h+"patch":"prerelease"},pe}var me,Ir;function gt(){if(Ir)return me;Ir=1;const t=G();return me=(r,s)=>new t(r,s).major,me}var Re,vr;function Nt(){if(vr)return Re;vr=1;const t=G();return Re=(r,s)=>new t(r,s).minor,Re}var Ie,$r;function Ot(){if($r)return Ie;$r=1;const t=G();return Ie=(r,s)=>new t(r,s).patch,Ie}var ve,Sr;function wt(){if(Sr)return ve;Sr=1;const t=M();return ve=(r,s)=>{const n=t(r,s);return n&&n.prerelease.length?n.prerelease:null},ve}var $e,Lr;function F(){if(Lr)return $e;Lr=1;const t=G();return $e=(r,s,n)=>new t(r,n).compare(new t(s,n)),$e}var Se,gr;function At(){if(gr)return Se;gr=1;const t=F();return Se=(r,s,n)=>t(s,r,n),Se}var Le,Nr;function Tt(){if(Nr)return Le;Nr=1;const t=F();return Le=(r,s)=>t(r,s,!0),Le}var ge,Or;function Qe(){if(Or)return ge;Or=1;const t=G();return ge=(r,s,n)=>{const l=new t(r,n),o=new t(s,n);return l.compare(o)||l.compareBuild(o)},ge}var Ne,wr;function Pt(){if(wr)return Ne;wr=1;const t=Qe();return Ne=(r,s)=>r.sort((n,l)=>t(n,l,s)),Ne}var Oe,Ar;function qt(){if(Ar)return Oe;Ar=1;const t=Qe();return Oe=(r,s)=>r.sort((n,l)=>t(l,n,s)),Oe}var we,Tr;function Q(){if(Tr)return we;Tr=1;const t=F();return we=(r,s,n)=>t(r,s,n)>0,we}var Ae,Pr;function er(){if(Pr)return Ae;Pr=1;const t=F();return Ae=(r,s,n)=>t(r,s,n)<0,Ae}var Te,qr;function nt(){if(qr)return Te;qr=1;const t=F();return Te=(r,s,n)=>t(r,s,n)===0,Te}var Pe,Cr;function it(){if(Cr)return Pe;Cr=1;const t=F();return Pe=(r,s,n)=>t(r,s,n)!==0,Pe}var qe,yr;function rr(){if(yr)return qe;yr=1;const t=F();return qe=(r,s,n)=>t(r,s,n)>=0,qe}var Ce,Ur;function tr(){if(Ur)return Ce;Ur=1;const t=F();return Ce=(r,s,n)=>t(r,s,n)<=0,Ce}var ye,xr;function at(){if(xr)return ye;xr=1;const t=nt(),c=it(),r=Q(),s=rr(),n=er(),l=tr();return ye=(f,a,i,e)=>{switch(a){case"===":return typeof f=="object"&&(f=f.version),typeof i=="object"&&(i=i.version),f===i;case"!==":return typeof f=="object"&&(f=f.version),typeof i=="object"&&(i=i.version),f!==i;case"":case"=":case"==":return t(f,i,e);case"!=":return c(f,i,e);case">":return r(f,i,e);case">=":return s(f,i,e);case"<":return n(f,i,e);case"<=":return l(f,i,e);default:throw new TypeError(`Invalid operator: ${a}`)}},ye}var Ue,Dr;function Ct(){if(Dr)return Ue;Dr=1;const t=G(),c=M(),{safeRe:r,t:s}=Y();return Ue=(l,o)=>{if(l instanceof t)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;o=o||{};let f=null;if(!o.rtl)f=l.match(o.includePrerelease?r[s.COERCEFULL]:r[s.COERCE]);else{const m=o.includePrerelease?r[s.COERCERTLFULL]:r[s.COERCERTL];let O;for(;(O=m.exec(l))&&(!f||f.index+f[0].length!==l.length);)(!f||O.index+O[0].length!==f.index+f[0].length)&&(f=O),m.lastIndex=O.index+O[1].length+O[2].length;m.lastIndex=-1}if(f===null)return null;const a=f[2],i=f[3]||"0",e=f[4]||"0",u=o.includePrerelease&&f[5]?`-${f[5]}`:"",h=o.includePrerelease&&f[6]?`+${f[6]}`:"";return c(`${a}.${i}.${e}${u}${h}`,o)},Ue}var xe,br;function yt(){if(br)return xe;br=1;class t{constructor(){this.max=1e3,this.map=new Map}get(r){const s=this.map.get(r);if(s!==void 0)return this.map.delete(r),this.map.set(r,s),s}delete(r){return this.map.delete(r)}set(r,s){if(!this.delete(r)&&s!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(r,s)}return this}}return xe=t,xe}var De,_r;function X(){if(_r)return De;_r=1;const t=/\s+/g;class c{constructor(d,v){if(v=n(v),d instanceof c)return d.loose===!!v.loose&&d.includePrerelease===!!v.includePrerelease?d:new c(d.raw,v);if(d instanceof l)return this.raw=d.value,this.set=[[d]],this.formatted=void 0,this;if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=d.trim().replace(t," "),this.set=this.raw.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const R=this.set[0];if(this.set=this.set.filter($=>!E($[0])),this.set.length===0)this.set=[R];else if(this.set.length>1){for(const $ of this.set)if($.length===1&&N($[0])){this.set=[$];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let d=0;d<this.set.length;d++){d>0&&(this.formatted+="||");const v=this.set[d];for(let R=0;R<v.length;R++)R>0&&(this.formatted+=" "),this.formatted+=v[R].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(d){const R=((this.options.includePrerelease&&m)|(this.options.loose&&O))+":"+d,$=s.get(R);if($)return $;const I=this.options.loose,S=I?a[i.HYPHENRANGELOOSE]:a[i.HYPHENRANGE];d=d.replace(S,ne(this.options.includePrerelease)),o("hyphen replace",d),d=d.replace(a[i.COMPARATORTRIM],e),o("comparator trim",d),d=d.replace(a[i.TILDETRIM],u),o("tilde trim",d),d=d.replace(a[i.CARETTRIM],h),o("caret trim",d);let w=d.split(" ").map(y=>x(y,this.options)).join(" ").split(/\s+/).map(y=>se(y,this.options));I&&(w=w.filter(y=>(o("loose invalid filter",y,this.options),!!y.match(a[i.COMPARATORLOOSE])))),o("range list",w);const g=new Map,P=w.map(y=>new l(y,this.options));for(const y of P){if(E(y))return[y];g.set(y.value,y)}g.size>1&&g.has("")&&g.delete("");const b=[...g.values()];return s.set(R,b),b}intersects(d,v){if(!(d instanceof c))throw new TypeError("a Range is required");return this.set.some(R=>A(R,v)&&d.set.some($=>A($,v)&&R.every(I=>$.every(S=>I.intersects(S,v)))))}test(d){if(!d)return!1;if(typeof d=="string")try{d=new f(d,this.options)}catch{return!1}for(let v=0;v<this.set.length;v++)if(ie(this.set[v],d,this.options))return!0;return!1}}De=c;const r=yt(),s=new r,n=Je(),l=ee(),o=J(),f=G(),{safeRe:a,t:i,comparatorTrimReplace:e,tildeTrimReplace:u,caretTrimReplace:h}=Y(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:O}=Z(),E=p=>p.value==="<0.0.0-0",N=p=>p.value==="",A=(p,d)=>{let v=!0;const R=p.slice();let $=R.pop();for(;v&&R.length;)v=R.every(I=>$.intersects(I,d)),$=R.pop();return v},x=(p,d)=>(p=p.replace(a[i.BUILD],""),o("comp",p,d),p=q(p,d),o("caret",p),p=D(p,d),o("tildes",p),p=L(p,d),o("xrange",p),p=te(p,d),o("stars",p),p),T=p=>!p||p.toLowerCase()==="x"||p==="*",D=(p,d)=>p.trim().split(/\s+/).map(v=>j(v,d)).join(" "),j=(p,d)=>{const v=d.loose?a[i.TILDELOOSE]:a[i.TILDE];return p.replace(v,(R,$,I,S,w)=>{o("tilde",p,R,$,I,S,w);let g;return T($)?g="":T(I)?g=`>=${$}.0.0 <${+$+1}.0.0-0`:T(S)?g=`>=${$}.${I}.0 <${$}.${+I+1}.0-0`:w?(o("replaceTilde pr",w),g=`>=${$}.${I}.${S}-${w} <${$}.${+I+1}.0-0`):g=`>=${$}.${I}.${S} <${$}.${+I+1}.0-0`,o("tilde return",g),g})},q=(p,d)=>p.trim().split(/\s+/).map(v=>U(v,d)).join(" "),U=(p,d)=>{o("caret",p,d);const v=d.loose?a[i.CARETLOOSE]:a[i.CARET],R=d.includePrerelease?"-0":"";return p.replace(v,($,I,S,w,g)=>{o("caret",p,$,I,S,w,g);let P;return T(I)?P="":T(S)?P=`>=${I}.0.0${R} <${+I+1}.0.0-0`:T(w)?I==="0"?P=`>=${I}.${S}.0${R} <${I}.${+S+1}.0-0`:P=`>=${I}.${S}.0${R} <${+I+1}.0.0-0`:g?(o("replaceCaret pr",g),I==="0"?S==="0"?P=`>=${I}.${S}.${w}-${g} <${I}.${S}.${+w+1}-0`:P=`>=${I}.${S}.${w}-${g} <${I}.${+S+1}.0-0`:P=`>=${I}.${S}.${w}-${g} <${+I+1}.0.0-0`):(o("no pr"),I==="0"?S==="0"?P=`>=${I}.${S}.${w}${R} <${I}.${S}.${+w+1}-0`:P=`>=${I}.${S}.${w}${R} <${I}.${+S+1}.0-0`:P=`>=${I}.${S}.${w} <${+I+1}.0.0-0`),o("caret return",P),P})},L=(p,d)=>(o("replaceXRanges",p,d),p.split(/\s+/).map(v=>B(v,d)).join(" ")),B=(p,d)=>{p=p.trim();const v=d.loose?a[i.XRANGELOOSE]:a[i.XRANGE];return p.replace(v,(R,$,I,S,w,g)=>{o("xRange",p,R,$,I,S,w,g);const P=T(I),b=P||T(S),y=b||T(w),z=y;return $==="="&&z&&($=""),g=d.includePrerelease?"-0":"",P?$===">"||$==="<"?R="<0.0.0-0":R="*":$&&z?(b&&(S=0),w=0,$===">"?($=">=",b?(I=+I+1,S=0,w=0):(S=+S+1,w=0)):$==="<="&&($="<",b?I=+I+1:S=+S+1),$==="<"&&(g="-0"),R=`${$+I}.${S}.${w}${g}`):b?R=`>=${I}.0.0${g} <${+I+1}.0.0-0`:y&&(R=`>=${I}.${S}.0${g} <${I}.${+S+1}.0-0`),o("xRange return",R),R})},te=(p,d)=>(o("replaceStars",p,d),p.trim().replace(a[i.STAR],"")),se=(p,d)=>(o("replaceGTE0",p,d),p.trim().replace(a[d.includePrerelease?i.GTE0PRE:i.GTE0],"")),ne=p=>(d,v,R,$,I,S,w,g,P,b,y,z)=>(T(R)?v="":T($)?v=`>=${R}.0.0${p?"-0":""}`:T(I)?v=`>=${R}.${$}.0${p?"-0":""}`:S?v=`>=${v}`:v=`>=${v}${p?"-0":""}`,T(P)?g="":T(b)?g=`<${+P+1}.0.0-0`:T(y)?g=`<${P}.${+b+1}.0-0`:z?g=`<=${P}.${b}.${y}-${z}`:p?g=`<${P}.${b}.${+y+1}-0`:g=`<=${g}`,`${v} ${g}`.trim()),ie=(p,d,v)=>{for(let R=0;R<p.length;R++)if(!p[R].test(d))return!1;if(d.prerelease.length&&!v.includePrerelease){for(let R=0;R<p.length;R++)if(o(p[R].semver),p[R].semver!==l.ANY&&p[R].semver.prerelease.length>0){const $=p[R].semver;if($.major===d.major&&$.minor===d.minor&&$.patch===d.patch)return!0}return!1}return!0};return De}var be,Gr;function ee(){if(Gr)return be;Gr=1;const t=Symbol("SemVer ANY");class c{static get ANY(){return t}constructor(e,u){if(u=r(u),e instanceof c){if(e.loose===!!u.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),o("comparator",e,u),this.options=u,this.loose=!!u.loose,this.parse(e),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(e){const u=this.options.loose?s[n.COMPARATORLOOSE]:s[n.COMPARATOR],h=e.match(u);if(!h)throw new TypeError(`Invalid comparator: ${e}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new f(h[2],this.options.loose):this.semver=t}toString(){return this.value}test(e){if(o("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if(typeof e=="string")try{e=new f(e,this.options)}catch{return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,u){if(!(e instanceof c))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(e.value,u).test(this.value):e.operator===""?e.value===""?!0:new a(this.value,u).test(e.semver):(u=r(u),u.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,u)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,u)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}be=c;const r=Je(),{safeRe:s,t:n}=Y(),l=at(),o=J(),f=G(),a=X();return be}var _e,jr;function re(){if(jr)return _e;jr=1;const t=X();return _e=(r,s,n)=>{try{s=new t(s,n)}catch{return!1}return s.test(r)},_e}var Ge,Fr;function Ut(){if(Fr)return Ge;Fr=1;const t=X();return Ge=(r,s)=>new t(r,s).set.map(n=>n.map(l=>l.value).join(" ").trim().split(" ")),Ge}var je,Xr;function xt(){if(Xr)return je;Xr=1;const t=G(),c=X();return je=(s,n,l)=>{let o=null,f=null,a=null;try{a=new c(n,l)}catch{return null}return s.forEach(i=>{a.test(i)&&(!o||f.compare(i)===-1)&&(o=i,f=new t(o,l))}),o},je}var Fe,Vr;function Dt(){if(Vr)return Fe;Vr=1;const t=G(),c=X();return Fe=(s,n,l)=>{let o=null,f=null,a=null;try{a=new c(n,l)}catch{return null}return s.forEach(i=>{a.test(i)&&(!o||f.compare(i)===1)&&(o=i,f=new t(o,l))}),o},Fe}var Xe,kr;function bt(){if(kr)return Xe;kr=1;const t=G(),c=X(),r=Q();return Xe=(n,l)=>{n=new c(n,l);let o=new t("0.0.0");if(n.test(o)||(o=new t("0.0.0-0"),n.test(o)))return o;o=null;for(let f=0;f<n.set.length;++f){const a=n.set[f];let i=null;a.forEach(e=>{const u=new t(e.semver.version);switch(e.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!i||r(u,i))&&(i=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),i&&(!o||r(o,i))&&(o=i)}return o&&n.test(o)?o:null},Xe}var Ve,Mr;function _t(){if(Mr)return Ve;Mr=1;const t=X();return Ve=(r,s)=>{try{return new t(r,s).range||"*"}catch{return null}},Ve}var ke,Br;function sr(){if(Br)return ke;Br=1;const t=G(),c=ee(),{ANY:r}=c,s=X(),n=re(),l=Q(),o=er(),f=tr(),a=rr();return ke=(e,u,h,m)=>{e=new t(e,m),u=new s(u,m);let O,E,N,A,x;switch(h){case">":O=l,E=f,N=o,A=">",x=">=";break;case"<":O=o,E=a,N=l,A="<",x="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(n(e,u,m))return!1;for(let T=0;T<u.set.length;++T){const D=u.set[T];let j=null,q=null;if(D.forEach(U=>{U.semver===r&&(U=new c(">=0.0.0")),j=j||U,q=q||U,O(U.semver,j.semver,m)?j=U:N(U.semver,q.semver,m)&&(q=U)}),j.operator===A||j.operator===x||(!q.operator||q.operator===A)&&E(e,q.semver))return!1;if(q.operator===x&&N(e,q.semver))return!1}return!0},ke}var Me,zr;function Gt(){if(zr)return Me;zr=1;const t=sr();return Me=(r,s,n)=>t(r,s,">",n),Me}var Be,Hr;function jt(){if(Hr)return Be;Hr=1;const t=sr();return Be=(r,s,n)=>t(r,s,"<",n),Be}var ze,Yr;function Ft(){if(Yr)return ze;Yr=1;const t=X();return ze=(r,s,n)=>(r=new t(r,n),s=new t(s,n),r.intersects(s,n)),ze}var He,Wr;function Xt(){if(Wr)return He;Wr=1;const t=re(),c=F();return He=(r,s,n)=>{const l=[];let o=null,f=null;const a=r.sort((h,m)=>c(h,m,n));for(const h of a)t(h,s,n)?(f=h,o||(o=h)):(f&&l.push([o,f]),f=null,o=null);o&&l.push([o,null]);const i=[];for(const[h,m]of l)h===m?i.push(h):!m&&h===a[0]?i.push("*"):m?h===a[0]?i.push(`<=${m}`):i.push(`${h} - ${m}`):i.push(`>=${h}`);const e=i.join(" || "),u=typeof s.raw=="string"?s.raw:String(s);return e.length<u.length?e:s},He}var Ye,Kr;function Vt(){if(Kr)return Ye;Kr=1;const t=X(),c=ee(),{ANY:r}=c,s=re(),n=F(),l=(u,h,m={})=>{if(u===h)return!0;u=new t(u,m),h=new t(h,m);let O=!1;e:for(const E of u.set){for(const N of h.set){const A=a(E,N,m);if(O=O||A!==null,A)continue e}if(O)return!1}return!0},o=[new c(">=0.0.0-0")],f=[new c(">=0.0.0")],a=(u,h,m)=>{if(u===h)return!0;if(u.length===1&&u[0].semver===r){if(h.length===1&&h[0].semver===r)return!0;m.includePrerelease?u=o:u=f}if(h.length===1&&h[0].semver===r){if(m.includePrerelease)return!0;h=f}const O=new Set;let E,N;for(const L of u)L.operator===">"||L.operator===">="?E=i(E,L,m):L.operator==="<"||L.operator==="<="?N=e(N,L,m):O.add(L.semver);if(O.size>1)return null;let A;if(E&&N){if(A=n(E.semver,N.semver,m),A>0)return null;if(A===0&&(E.operator!==">="||N.operator!=="<="))return null}for(const L of O){if(E&&!s(L,String(E),m)||N&&!s(L,String(N),m))return null;for(const B of h)if(!s(L,String(B),m))return!1;return!0}let x,T,D,j,q=N&&!m.includePrerelease&&N.semver.prerelease.length?N.semver:!1,U=E&&!m.includePrerelease&&E.semver.prerelease.length?E.semver:!1;q&&q.prerelease.length===1&&N.operator==="<"&&q.prerelease[0]===0&&(q=!1);for(const L of h){if(j=j||L.operator===">"||L.operator===">=",D=D||L.operator==="<"||L.operator==="<=",E){if(U&&L.semver.prerelease&&L.semver.prerelease.length&&L.semver.major===U.major&&L.semver.minor===U.minor&&L.semver.patch===U.patch&&(U=!1),L.operator===">"||L.operator===">="){if(x=i(E,L,m),x===L&&x!==E)return!1}else if(E.operator===">="&&!s(E.semver,String(L),m))return!1}if(N){if(q&&L.semver.prerelease&&L.semver.prerelease.length&&L.semver.major===q.major&&L.semver.minor===q.minor&&L.semver.patch===q.patch&&(q=!1),L.operator==="<"||L.operator==="<="){if(T=e(N,L,m),T===L&&T!==N)return!1}else if(N.operator==="<="&&!s(N.semver,String(L),m))return!1}if(!L.operator&&(N||E)&&A!==0)return!1}return!(E&&D&&!N&&A!==0||N&&j&&!E&&A!==0||U||q)},i=(u,h,m)=>{if(!u)return h;const O=n(u.semver,h.semver,m);return O>0?u:O<0||h.operator===">"&&u.operator===">="?h:u},e=(u,h,m)=>{if(!u)return h;const O=n(u.semver,h.semver,m);return O<0?u:O>0||h.operator==="<"&&u.operator==="<="?h:u};return Ye=l,Ye}var We,Zr;function kt(){if(Zr)return We;Zr=1;const t=Y(),c=Z(),r=G(),s=st(),n=M(),l=vt(),o=$t(),f=St(),a=Lt(),i=gt(),e=Nt(),u=Ot(),h=wt(),m=F(),O=At(),E=Tt(),N=Qe(),A=Pt(),x=qt(),T=Q(),D=er(),j=nt(),q=it(),U=rr(),L=tr(),B=at(),te=Ct(),se=ee(),ne=X(),ie=re(),p=Ut(),d=xt(),v=Dt(),R=bt(),$=_t(),I=sr(),S=Gt(),w=jt(),g=Ft(),P=Xt(),b=Vt();return We={parse:n,valid:l,clean:o,inc:f,diff:a,major:i,minor:e,patch:u,prerelease:h,compare:m,rcompare:O,compareLoose:E,compareBuild:N,sort:A,rsort:x,gt:T,lt:D,eq:j,neq:q,gte:U,lte:L,cmp:B,coerce:te,Comparator:se,Range:ne,satisfies:ie,toComparators:p,maxSatisfying:d,minSatisfying:v,minVersion:R,validRange:$,outside:I,gtr:S,ltr:w,intersects:g,simplifyRange:P,subset:b,SemVer:r,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:c.SEMVER_SPEC_VERSION,RELEASE_TYPES:c.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers},We}var Mt=kt();const Jr=pt(Mt);var C;(function(t){t.blue="blue",t.nanoS="nanoS",t.nanoSP="nanoSP",t.nanoX="nanoX",t.stax="stax",t.europa="europa",t.apex="apex"})(C||(C={}));const Ke={[C.blue]:{id:C.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:t=>4*1024},[C.nanoS]:{id:C.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:t=>Jr.lt(Jr.coerce(t)??"","2.0.0")?4*1024:2*1024},[C.nanoX]:{id:C.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:t=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[C.nanoSP]:{id:C.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1533*1024,masks:[856686592],getBlockSize:t=>32},[C.apex]:{id:C.apex,productName:"Ledger Nano Gen5",productIdMM:128,legacyUsbProductId:8,usbOnly:!1,memorySize:1533*1024,masks:[859832320],getBlockSize:t=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-8004-0000-4c6564676572",notifyUuid:"13d63400-2c97-8004-0001-4c6564676572",writeUuid:"13d63400-2c97-8004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-8004-0003-4c6564676572"}]},[C.stax]:{id:C.stax,productName:"Ledger Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1533*1024,masks:[857735168],getBlockSize:t=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[C.europa]:{id:C.europa,productName:"Ledger Flex",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1533*1024,masks:[858783744],getBlockSize:t=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};C.blue,C.nanoS,C.nanoSP,C.nanoX,C.stax,C.europa;const Qr=Object.values(Ke),ot=11415,et=t=>{const c=Qr.find(n=>n.legacyUsbProductId===t);if(c)return c;const r=t>>8;return Qr.find(n=>n.productIdMM===r)},Bt=[],rt={};for(const t in Ke){const c=Ke[t],{bluetoothSpec:r}=c;if(r)for(let s=0;s<r.length;s++){const n=r[s];Bt.push(n.serviceUuid),rt[n.serviceUuid]=rt[n.serviceUuid.replace(/-/g,"")]={deviceModel:c,...n}}}const zt=[{vendorId:ot}],Ht=()=>Promise.resolve(!!(window.navigator&&window.navigator.hid)),K=()=>{const{hid:t}=navigator;if(!t)throw new H("navigator.hid is not supported","HIDNotSupported");return t};async function ct(){const t=await K().requestDevice({filters:zt});return Array.isArray(t)?t:[t]}async function Ze(){return(await K().getDevices()).filter(c=>c.vendorId===ot)}async function Yt(){const t=await Ze();return t.length>0?t[0]:(await ct())[0]}const k=class k extends ht{constructor(r){super();_(this,"device");_(this,"deviceModel");_(this,"channel",Math.floor(Math.random()*65535));_(this,"packetSize",64);_(this,"inputs",[]);_(this,"inputCallback");_(this,"read",()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(r=>{this.inputCallback=r}));_(this,"onInputReport",r=>{const s=V.from(r.data.buffer);this.inputCallback?(this.inputCallback(s),this.inputCallback=null):this.inputs.push(s)});_(this,"_disconnectEmitted",!1);_(this,"_emitDisconnect",r=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",r))});_(this,"exchange",async r=>await this.exchangeAtomicImpl(async()=>{const{channel:n,packetSize:l}=this;ir("apdu","=> "+r.toString("hex"));const o=It(n,l),f=o.makeBlocks(r);for(let e=0;e<f.length;e++)await this.device.sendReport(0,f[e]);let a,i;for(;!(a=o.getReducedResult(i));)try{const e=await this.read();i=o.reduceResponse(i,e)}catch(e){if(e instanceof H&&e.id==="InvalidChannel")continue;throw e}return ir("apdu","<= "+a.toString("hex")),a}).catch(n=>{throw n&&n.message&&n.message.includes("write")?(this._emitDisconnect(n),new dt(n.message)):n}));this.device=r,this.deviceModel=typeof r.productId=="number"?et(r.productId):void 0,r.addEventListener("inputreport",this.onInputReport)}static async request(){const[r]=await ct();return k.open(r)}static async openConnected(){const r=await Ze();return r.length===0?null:k.open(r[0])}static async open(r){await r.open();const s=new k(r),n=l=>{r===l.device&&(K().removeEventListener("disconnect",n),s._emitDisconnect(new Et))};return K().addEventListener("disconnect",n),s}async close(){await this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),await this.device.close()}setScrambleKey(){}};_(k,"isSupported",Ht),_(k,"list",Ze),_(k,"listen",r=>{let s=!1;Yt().then(l=>{if(!l)r.error(new nr("Access denied to use Ledger device"));else if(!s){const o=typeof l.productId=="number"?et(l.productId):void 0;r.next({type:"add",descriptor:l,deviceModel:o}),r.complete()}},l=>{r.error(new nr(l.message))});function n(){s=!0}return{unsubscribe:n}});let tt=k;export{tt as default};
